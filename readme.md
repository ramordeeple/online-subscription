# üéüÔ∏è **Online Subscription Service**

### –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏.

* **–°–æ–∑–¥–∞–Ω–∏–µ / –ø—Ä–æ—Å–º–æ—Ç—Ä / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ / —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ (CRUDL)**
* **–ü–æ–¥—Å—á–µ—Ç —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥**
* **Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
* **–õ–æ–≥–∏ —á–µ—Ä–µ–∑ [Uber Zap](https://github.com/uber-go/zap)**
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ PostgreSQL**

---

## ‚öôÔ∏è **–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç       | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏                                                                      |
|-----------------|---------------------------------------------------------------------------------|
| Backend         | Go 1.25+, [Zap](https://github.com/uber-go/zap), [UUID](github.com/google/uuid) |
| Database        | PostgreSQL                                                                      |
| Migrations      | SQL —Ñ–∞–π–ª—ã + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π runner                                                   |
| API Docs        | [Swaggo](https://github.com/swaggo/swag)                                        |
| Dev Environment | Docker Compose                                                                  |

---

## üóÇÔ∏è **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
online-subscription/
‚îú‚îÄ cmd/
‚îÇ  ‚îî‚îÄ online-subscription/
‚îÇ     ‚îî‚îÄ main.go                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ docs/                              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ Swagger UI
‚îú‚îÄ internal/
‚îÇ  ‚îú‚îÄ app/
‚îÇ  ‚îÇ  ‚îú‚îÄ app.go                       # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ  ‚îÇ  ‚îî‚îÄ router.go                    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ HTTP –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ  ‚îú‚îÄ config/
‚îÇ  ‚îÇ  ‚îî‚îÄ config.go                    # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ .env
‚îÇ  ‚îú‚îÄ handler/
‚îÇ  ‚îÇ  ‚îú‚îÄ subscription_handler.go      # –û—Å–Ω–æ–≤–Ω–æ–π CRUDL —Ö—ç–Ω–¥–ª–µ—Ä –¥–ª—è –ø–æ–¥–ø–∏—Å–æ–∫
‚îÇ  ‚îÇ  ‚îú‚îÄ dto/
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ request.go                # DTO –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ  ‚îÇ  ‚îú‚îÄ helpers/
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ helpers.go                # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞–∫–µ—Ç–∞ handler
‚îÇ  ‚îÇ  ‚îú‚îÄ mapper/
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ subscription_mapper.go    # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ  ‚îÇ  ‚îú‚îÄ parser/
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ subscription_parser.go    # –†–∞–∑–±–æ—Ä –∏ –ø–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
‚îÇ  ‚îÇ  ‚îî‚îÄ validator/
‚îÇ  ‚îÇ     ‚îî‚îÄ subscription_validator.go # –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ  ‚îú‚îÄ logger/
‚îÇ  ‚îÇ  ‚îî‚îÄ logger.go                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zap –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ  ‚îú‚îÄ model/
‚îÇ  ‚îÇ  ‚îî‚îÄ subscription.go              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Subscription)
‚îÇ  ‚îú‚îÄ repository/
‚îÇ  ‚îÇ  ‚îú‚îÄ postgres/
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ subscription_repo.go      # PostgreSQL —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ  ‚îÇ  ‚îú‚îÄ migrations.go                # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –ë–î
‚îÇ  ‚îÇ  ‚îî‚îÄ repository.go                # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è CRUDL
‚îÇ  ‚îî‚îÄ usecase/
‚îÇ     ‚îî‚îÄ subscription.go              # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ CRUDL –ø–æ–¥–ø–∏—Å–æ–∫
‚îî‚îÄ migrations/                        # –§–∞–π–ª—ã .sql –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö


```

---

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**

### 1Ô∏è‚É£ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

* üê≥ Docker Desktop
* üíª Go 1.25+
* üõ†Ô∏è –õ—é–±–æ–π HTTP –∫–ª–∏–µ–Ω—Ç (**Postman**, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ **GoLand**)

---

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ñ–∞–π–ª–µ `.env` (–∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ Docker Compose):

```
DB_HOST=db
DB_PORT=5432
DB_USER=subscription
DB_PASSWORD=123
DB_NAME=subscriptions
DB_SSLMODE=disable
APP_PORT=8080
LOG_LEVEL=info
```

---

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker compose build
docker compose up
```

> üí° –õ–∏–±–æ –∂–µ –ü–ö–ú –ø–æ `docker-compose.yml` –∏ –Ω–∞–∂–∞—Ç—å –Ω–∞ `Run 'docker-compose.yml'`.

–ë—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É–∫–∞–∑–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ `.env`

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ      |
|----------|---------------|
| Host     | db            |
| Port     | 5432          |
| Database | subscriptions |
| Username | subscription  |
| Password | 123           |

üìç –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:8080](http://localhost:8080)

> ‚ö†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ —Ç–∞–±–ª–∏—Ü–∞
`subscriptions`.
> –§–∞–π–ª `.env` –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∫–∞–∫ –∑–¥–µ—Å—å –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –¥–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–∑ GitHub.
---

## üìò **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

| –¢–∏–ø          | URL                                                                                  |
|--------------|--------------------------------------------------------------------------------------|
| Swagger UI   | [http://localhost:8080/swagger/index.html](http://localhost:8080/swagger/index.html) |
| OpenAPI JSON | [http://localhost:8080/swagger/doc.json](http://localhost:8080/swagger/doc.json)     |

---

## üóÉÔ∏è **–ú–∏–≥—Ä–∞—Ü–∏–∏**

* –ü–∞–ø–∫–∞: `migrations/`
* –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
* –¢–∞–±–ª–∏—Ü–∞ `subscriptions` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üåê **–ü—Ä–∏–º–µ—Ä—ã HTTP –∑–∞–ø—Ä–æ—Å–æ–≤**

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

```http
POST http://localhost:8080/subscriptions
Content-Type: application/json

{
  "service_name": "Netflix",
  "price": 999,
  "start_date": "12-2025",
  "user_id": "54639c13-710c-48f1-80b0-d18e88a6e9f5"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å–æ–∫

```http
GET http://localhost:8080/subscriptions
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ ID

```http
GET http://localhost:8080/subscriptions/{id}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

```http
PATCH http://localhost:8080/subscriptions/{id}
Content-Type: application/json

{
  "service_name": "Spotify",
  "price": 1200,
  "start_date": "01-2026"
}
```

### –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

```http
DELETE http://localhost:8080/subscriptions/{id}
```

### –°—É–º–º–∞—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–æ–∫

```http
GET http://localhost:8080/subscriptions/summary?from=01-2025&user_id=54639c13-710c-48f1-80b0-d18e88a6e9f5&service_name=Netflix
```

> üí° –í `requests/request.http` –µ—Å—Ç—å —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è CRUDL –∑–∞–ø—Ä–æ—Å–æ–≤. 

